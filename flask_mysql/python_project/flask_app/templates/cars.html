<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cars</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
</head>
<style>
    body {
        background-image: url("./static/background.jpg");
    }
</style>
<body>
    <div class="container text-light" style="width: 60%;">
        <div class="header d-flex justify-content-between" style="margin-top: 50px; margin-bottom: 30px;">
            <h1>Car Collection</h1>
            <div>
                <a class="w-80 btn btn-small btn-secondary" style="margin-right: 20px;" href="/dashboard">Dashboard</a>
                <a class="w-80 btn btn-small btn-secondary" href="/logout">Logout</a>
            </div>
        </div>
        <div class="main text-light">
            <table class="table table-striped table-bordered" style="background-color: midnightblue;">
                <thead class="thead-dark">
                    <tr class="text-light">
                        <th style="">Model</th>
                        <th style="">Color</th>
                        <th style="width: 170px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for car in all_cars %}
                    <tr class="text-light">
                        <td>{{ car['model'] }}</td>
                        <td>{{ car['color'] }}</td>
                        <td style="width: 200px;display: flex;">
                            <a class="btn btn-sm btn-primary" style="margin-right: 10px" href="/cars/{{ car.id }}">View</a>
                            <!-- <form action="/cars/{{car.id}}/add" method="POST">
                                {% set dict = {'found': False} %}
                                {% for item in user.cars %}
                                    {% if car.id == item.id %}
                                        {% if dict.update({'found': True}) %} {% endif %}
                                    {% endif %}
                                {% endfor %}
                                {% if dict['found'] %}
                                <p class="btn-sm btn-secondary">Added!</p>
                                {% else %}
                                <button class="btn btn-sm btn-primary">Add to Fav</button>
                                {% endif %}
                            </form> -->
                            {% set dict = {'found': False} %}
                            {% for item in user.cars %}
                                {% if car.id == item.id %}
                                    {% if dict.update({'found': True}) %} {% endif %}
                                {% endif %}
                            {% endfor %}
                            {% if dict['found'] %}
                                <a href="/cars/{{car.id}}/unadd"class="btn btn-sm btn-danger">Remove</a>
                            {% else %}
                                <a href="/cars/{{car.id}}/add" class="btn btn-sm btn-success" method="GET">Add to Fav</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor%}
                </tbody>
            </table>
            <a class="w-80 btn btn-small btn-warning" style="margin-left: 90%;" href="/dashboard">Back</a>
        </div>
    </div>
</body>
</html>